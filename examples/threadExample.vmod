import thread;

func increment() {
    env x {
        append(10);
        append(100);
    }
    return true;
}

func callback(y) {
    env x {
        println(x);
    }
}


let x = [1, 23];


decenv multithreaded = {
    let x = x;
    let increment = increment;
}

env thread {
    env multithreaded {
        spawn(increment, 0, callback)
    }
}


env multithreaded {
    env x {
        println(x);
    }
}